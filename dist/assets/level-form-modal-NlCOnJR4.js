import{aa as a,r as f,b,j as e,aw as g,at as s,ag as y}from"./index-XWZJOGTG.js";import{d}from"./dayjs.min-D9M4XKf5.js";import{p as F}from"./programs-zQla2BAp.js";import{S as I}from"./index-DCIFzzg3.js";import{D as m}from"./index-CfF7_bgE.js";function E({title:p,show:u,formValue:t,okDisabled:c,onOk:x,onCancel:h}){const[o]=a.useForm();f.useEffect(()=>{o.setFieldsValue({...t})},[t,o]);const{data:n}=b({queryKey:["programs"],queryFn:()=>F.get(),refetchOnWindowFocus:!1}),j=n==null?void 0:n.items.map(({id:r,name:i})=>({value:r,label:e.jsx("span",{children:i})})),l={getValueProps:r=>({value:r&&d(r)}),normalize:r=>r&&`${d(r).toISOString()}`};return e.jsxs(g,{forceRender:!0,title:p,open:u,okButtonProps:{autoFocus:!0,htmlType:"submit",disabled:c},okText:t.id===void 0?s("common.create"):s("common.edit"),cancelText:s("common.cancel"),onCancel:h,modalRender:r=>e.jsx(a,{form:o,initialValues:t,onFinish:i=>x(t.id,i),labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",children:r}),children:[!t.id&&e.jsx(a.Item,{label:s("app.fields.program"),name:"programId",rules:[{required:!0}],children:e.jsx(I,{showSearch:!0,options:j})}),e.jsx(a.Item,{label:s("app.fields.name"),name:"name",rules:[{required:!0}],children:e.jsx(y,{})}),e.jsx(a.Item,{label:s("app.fields.start"),name:"start",...l,rules:[{required:!0}],children:e.jsx(m,{style:{width:"100%"}})}),e.jsx(a.Item,{label:s("app.fields.end"),name:"end",...l,rules:[{required:!0}],children:e.jsx(m,{style:{width:"100%"}})})]})}export{E as default};
