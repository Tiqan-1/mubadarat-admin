import{ab as k,an as z,u as F,r as v,b as I,ac as P,j as e,ao as m,B as u,I as a,aq as D,S as E,D as N}from"./index-DN_LE4ff.js";import{F as T}from"./Table-DvCu9zyw.js";import{s as p}from"./subjects-CNueMXU8.js";import{useSubjectModal as _}from"./use-subject-modal-DKerhPuZ.js";import q from"./subject-form-modal-DRG5M91o.js";import B from"./subject-filter-Bqtbaz1X.js";import{P as M}from"./index-fEMJRJ1s.js";import{C as O}from"./index-DjR-mQpu.js";import"./index-DzWKCnLv.js";import"./index-C4LaZWfl.js";import"./programs-BpIXPJfC.js";function U(){const f=k(),[x]=z(),{t:i}=F(),[n,r]=v.useState(Object.fromEntries(x.entries())),{data:o,refetch:c,isLoading:l,isFetching:d}=I({queryKey:["subjects",n],queryFn:()=>p.get(n),refetchOnWindowFocus:!1}),{modalProps:j,onCreate:h,onEdit:g}=_(()=>c()),b=P({mutationFn:t=>p.destroy(t),onSuccess(){c()}});function y(t){r(t)}function S(){r({})}const w=t=>{b.mutate(t.id)},C=[{title:i("app.fields.id"),dataIndex:"id",width:100,render:(t,s)=>e.jsx(m,{copyable:!0,ellipsis:!0,children:s.id})},{title:i("app.fields.name"),dataIndex:"name",fixed:"left",render:(t,s)=>e.jsx("div",{children:s.name})},{title:i("app.fields.description"),dataIndex:"description",width:400,render:(t,s)=>e.jsx(m,{copyable:!0,ellipsis:!0,children:s.description})},{title:i("common.action"),key:"operation",fixed:"right",width:100,render:(t,s)=>e.jsxs("div",{className:"flex w-full justify-end text-gray",children:[e.jsx(u,{onClick:()=>f(`/lessons?subjectId=${s.id}`),icon:e.jsx(a,{icon:"solar:video-frame-play-horizontal-broken",size:18}),children:i("app.lessons.title")}),e.jsx(D,{onClick:()=>g(s),children:e.jsx(a,{icon:"solar:pen-bold-duotone",size:18})}),e.jsx(M,{title:i("common.confirm-deleting"),okText:i("common.ok"),cancelText:i("common.cancel"),placement:"left",onConfirm:()=>w(s),children:e.jsx("button",{type:"button",children:e.jsx(a,{icon:"mingcute:delete-2-fill",size:18,className:"text-error"})})})]})}];return e.jsxs(E,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(B,{formValue:n,okDisabled:l||d,onClear:S,onSearch:y}),e.jsx(N,{children:i("app.subjects.grid-header")}),e.jsxs(O,{extra:e.jsxs(u,{type:"primary",onClick:()=>h(),children:[" ",i("common.create")," "]}),children:[e.jsx(T,{rowKey:"id",size:"small",scroll:{x:"max-content"},columns:C,dataSource:o==null?void 0:o.items,loading:l||d,pagination:{pageSizeOptions:[10,30,50],current:n.page??1,showSizeChanger:!0,showQuickJumper:!0,total:o==null?void 0:o.total,onChange:(t,s)=>r({...n,page:t,pageSize:s})}}),e.jsx(q,{...j})]})]})}export{U as default};
