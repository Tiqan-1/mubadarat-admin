import{aa as n,r as m,b as o,j as e,aw as D,at as t,ag as M,ai as B}from"./index-DN_LE4ff.js";import{d as g}from"./dayjs.min-B92MZlCX.js";import{a as N}from"./levels-BcrHyLxu.js";import{l as Q}from"./lessons-B_wNNqRB.js";import{s as $}from"./subjects-CNueMXU8.js";import{p as G}from"./programs-BpIXPJfC.js";import{S as r}from"./index-DzWKCnLv.js";import{D as H}from"./index-KTjjIOW4.js";import{a as J}from"./index-C4LaZWfl.js";function ae({title:y,show:I,formValue:l,okDisabled:v,onOk:F,onCancel:w}){var h,j,x,f,b;const[d]=n.useForm(),[p,q]=m.useState(void 0),[u,S]=m.useState(void 0);m.useEffect(()=>{d.setFieldsValue({...l})},[l,d]);const C=o({queryKey:["programs"],queryFn:()=>G.get(),refetchOnWindowFocus:!1}),P=o({queryKey:["levels",u],queryFn:()=>N.get({programId:u}),refetchOnWindowFocus:!1}),O=o({queryKey:["subjects"],queryFn:()=>$.get({}),refetchOnWindowFocus:!1}),k=o({queryKey:["assignments"],queryFn:()=>B.get({}),refetchOnWindowFocus:!1}),A=o({queryKey:["lessons",p],queryFn:()=>Q.get({subjectId:p}),refetchOnWindowFocus:!1}),i=(h=C.data)==null?void 0:h.items.map(({id:s,name:a})=>({value:s,label:e.jsx("span",{children:a})}));i==null||i.unshift({value:"",label:e.jsx("span",{children:""})});const K=(j=P.data)==null?void 0:j.items.map(({id:s,name:a})=>({value:s,label:e.jsx("span",{children:a})})),R=(x=k.data)==null?void 0:x.items.map(({id:s,title:a})=>({value:s,label:e.jsx("span",{children:a})})),c=(f=O.data)==null?void 0:f.items.map(({id:s,name:a})=>({value:s,label:e.jsx("span",{children:a})}));c==null||c.unshift({value:"",label:e.jsx("span",{children:""})});const T=(b=A.data)==null?void 0:b.items.map(({id:s,title:a})=>({value:s,label:e.jsx("span",{children:a})})),W=s=>{q(s)},E=s=>{S(s)},z={getValueProps:s=>({value:s&&g(s)}),normalize:s=>s&&`${g(s).toISOString()}`};return e.jsxs(D,{forceRender:!0,title:y,open:I,okButtonProps:{autoFocus:!0,htmlType:"submit",disabled:v},okText:l.id===void 0?t("common.create"):t("common.edit"),cancelText:t("common.cancel"),onCancel:w,modalRender:s=>e.jsx(n,{form:d,initialValues:l,onFinish:a=>F(l.id,a),labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",children:s}),children:[!l.id&&e.jsx(n.Item,{label:t("app.fields.program"),name:"programId",children:e.jsx(r,{showSearch:!0,options:i,onChange:E})}),!l.id&&e.jsx(n.Item,{label:t("app.fields.level"),name:"levelId",rules:[{required:!0}],children:e.jsx(r,{showSearch:!0,options:K})}),e.jsx(n.Item,{label:t("app.fields.subject"),name:"subjectId",children:e.jsx(r,{showSearch:!0,options:c,onChange:W})}),e.jsx(n.Item,{label:t("app.lessons.title"),name:"lessonIds",children:e.jsx(r,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select",defaultValue:["a10","c12"],options:T})}),e.jsx(n.Item,{label:t("app.fields.assignment"),name:"assignmentId",children:e.jsx(r,{showSearch:!0,options:R})}),e.jsx(n.Item,{label:t("app.fields.date"),name:"date",...z,rules:[{required:!0}],children:e.jsx(H,{style:{width:"100%"}})}),e.jsx(n.Item,{label:t("app.fields.note"),name:"note",children:e.jsx(M.TextArea,{})}),e.jsx(n.Item,{label:null,name:"hasChatRoom",valuePropName:"checked",children:e.jsx(J,{children:t("app.fields.hasChatRoom")})})]})}export{ae as default};
