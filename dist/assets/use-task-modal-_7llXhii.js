import{aj as o,ak as d,al as p,an as f,ac as g,r as h,at as u}from"./index-DN_LE4ff.js";const w=e=>o.get({url:"/tasks",params:p(e),headers:{"ngrok-skip-browser-warning":"true"}}),b=e=>o.get({url:d("/tasks/:id",{id:e})}),P=e=>o.post({url:"/tasks",data:e}),_=(e,r)=>o.put({url:d("/tasks/:id",{id:e}),data:r}),v=e=>o.delete({url:d("/tasks/:id",{id:e})}),c={get:w,show:b,create:P,update:_,destroy:v},n={date:"",lessonIds:[],assignmentId:""};function E(e){const[r]=f();n.levelId=r.get("levelId")??void 0;const i=g({mutationFn:a=>a.id!==void 0?c.update(a.id,a.data):c.create(a.data),onSuccess:()=>{t(a=>({...a,show:!1,okDisabled:!1})),e()},onError(a,s,l){console.log("onError",a,s,l),t(k=>({...k,okDisabled:!1}))}}),[m,t]=h.useState({formValue:{...n},title:u("common.create"),show:!1,okDisabled:!1,onOk:(a,s)=>{i.mutate({id:a,data:s}),t(l=>({...l,okDisabled:!0}))},onCancel:()=>{t(a=>({...a,show:!1}))}});return{modalProps:m,setModalProps:t,onCreate:a=>{t(s=>({...s,show:!0,...n,title:u("common.create"),formValue:{...n,parentId:(a==null?void 0:a.id)??""}}))},onEdit:a=>{t(s=>({...s,show:!0,title:u("common.edit"),formValue:a}))},mutation:i}}const C=Object.freeze(Object.defineProperty({__proto__:null,useTaskModal:E},Symbol.toStringTag,{value:"Module"}));export{c as a,C as b,E as u};
